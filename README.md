# マインドエンジニアリング・コーチング管理システム（Next.js版）

マインドエンジニアリング・コーチング業務管理のためのウェブアプリケーションです。Next.jsとGoogle Sheets APIを使用し、クライアント管理、セッション予約、支払い記録などの機能を提供します。

## 機能概要

### ダッシュボード
- 当日を含む今週のセッション一覧表示
- クライアント状況の概要（ステータス別件数）
- クイックアクセスリンク（新規クライアント登録、セッション登録など）

### クライアント管理
- クライアント一覧表示と検索・フィルタリング機能
- クライアント詳細情報の表示と編集
- クライアントごとのセッション履歴・支払い履歴表示
- 新規クライアント登録

### セッション管理
- セッション一覧の表示（リスト形式とカレンダー形式）
  - カレンダーは月表示、週表示、日表示、アジェンダ表示に対応
  - セッションのステータスに応じた色分け表示
- セッション詳細表示と編集
- セッションステータス管理（予定、実施済み、キャンセル、延期）
- 新規セッション登録（クライアント選択、日時指定）
- GoogleMeetリンクの自動生成と表示
- セッションメモの記録機能

### フォローアップメール機能
- セッション完了時に自動的にメール送信画面を表示
- トライアルセッション後の継続案内メール機能
  - 継続セッションの申し込みフォームリンク付き
  - 申し込み期限の自動計算
- 通常セッション後の次回予約案内メール機能
  - 予約カレンダーURLの表示
- メールテンプレートの編集機能
- メールクライアント連携機能

### 支払い管理
- 支払い一覧表示と検索・フィルタリング
- 支払い詳細表示と編集
- 支払いステータス管理（入金済、未入金、キャンセル）
- 新規支払い登録

### システム全般
- レスポンシブデザイン（PC・タブレット・スマートフォン対応）
- ダークモード対応
- 認証機能（NextAuth.js/Google OAuth）
- エラーハンドリングとローディング表示

## 技術スタック

- **フロントエンド**: Next.js 14.1.0、React 18、Tailwind CSS
- **UIライブラリ**: react-big-calendar、moment、react-datepicker
- **認証**: NextAuth.js（Google OAuth）
- **データストア**: Google Sheets API
- **API連携**: Google Calendar API、Gmail API
- **デプロイ**: Vercel

## 環境のセットアップ

### 前提条件

- Node.js 14.x 以上
- npm または yarn
- Google Cloud Platformのアカウント

### インストール手順

1. リポジトリをクローン
```bash
git clone https://github.com/Yuuta12-maker/mec-coaching-nextjs.git
cd mec-coaching-nextjs
```

2. 依存パッケージをインストール
```bash
npm install
# または
yarn install
```

3. 環境変数の設定
`.env.example` ファイルを `.env.local` としてコピーし、必要な環境変数を設定します。

```bash
cp .env.example .env.local
```

4. 開発サーバーの起動
```bash
npm run dev
# または
yarn dev
```

5. ブラウザでアクセス: [http://localhost:3000](http://localhost:3000)

## デプロイ

このアプリケーションはVercelにデプロイされています。新しい変更をGitHubにプッシュすると、自動的にデプロイが開始されます。

Vercelにデプロイするための主な手順：
1. Vercelダッシュボードでプロジェクトを作成
2. GitHubリポジトリを連携
3. 環境変数を設定
4. デプロイを実行

※デプロイ時には必要なパッケージ（react-big-calendarやmomentなど）がpackage.jsonに含まれていることを確認してください。

## プロジェクト構造

```
mec-coaching-nextjs/
├── components/       # 再利用可能なUIコンポーネント
│   ├── clients/      # クライアント関連コンポーネント
│   ├── email/        # メールテンプレートコンポーネント
│   ├── sessions/     # セッション関連コンポーネント
│   ├── payments/     # 支払い関連コンポーネント
│   └── ui/           # 共通UIコンポーネント
├── lib/              # 共通ライブラリ・ユーティリティ
│   ├── constants.js  # 定数定義
│   ├── sheets.js     # Google Sheets連携
│   └── utils.js      # ユーティリティ関数
├── pages/            # ページコンポーネント
│   ├── api/          # APIエンドポイント
│   ├── auth/         # 認証関連ページ
│   ├── clients/      # クライアント関連ページ
│   ├── sessions/     # セッション関連ページ
│   └── payments/     # 支払い関連ページ
├── public/           # 静的ファイル
└── styles/           # スタイルシート（globals.css）
```

## 現在の開発状況（2025年3月27日）

### 実装済み機能
- ✅ ダッシュボード
- ✅ クライアント管理（一覧、詳細、編集、新規登録）
- ✅ セッション管理（一覧、カレンダー表示、詳細、編集、新規登録）
- ✅ セッション完了時のフォローアップメール自動表示
- ✅ 支払い管理（基本機能）
- ✅ Google Meet URL自動生成
- ✅ モバイル対応レスポンシブデザイン

### 開発中機能
- 🚧 支払い管理の強化（入金確認機能、請求書生成）
- 🚧 Google Calendar連携の改善
- 🚧 メール送信履歴管理

### 今後の機能拡張予定
- 📝 セッション分析・レポート機能
- 📝 クライアントポータル（クライアント向けログイン機能）
- 📝 自動リマインダーメール送信機能
- 📝 契約書自動生成機能

## データモデルとステータス

### ステータス値の統一
すべてのステータス値は`lib/constants.js`で一元管理されています：

1. クライアントステータス
   - 問い合わせ
   - トライアル前
   - トライアル済
   - 契約中
   - 完了
   - 中断

2. セッションステータス
   - 予定
   - 実施済
   - キャンセル
   - 延期

3. 支払いステータス
   - 入金済
   - 未入金
   - キャンセル

## 最新の更新内容（2025年3月27日）

- セッション一覧画面をカレンダー形式に改善（react-big-calendarを導入）
- セッション完了時の自動メール表示機能を実装
- カレンダー表示の日本語対応
- Vercelデプロイの安定化

## ライセンス

このプロジェクトはプライベートであり、森山雄太の許可なく再配布・使用することはできません。

Copyright © 2025 マインドエンジニアリング・コーチング. All rights reserved.